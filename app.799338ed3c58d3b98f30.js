!function(){"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===r?new Date(t.getTime()):"number"==typeof t||"[object Number]"===r?new Date(t):("string"!=typeof t&&"[object String]"!==r||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var n=36e5,a={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,o=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(t,n){e(1,arguments);var a=n||{},i=null==a.additionalDigits?2:r(a.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var o,c=s(t);if(c.date){var l=u(c.date,i);o=d(l.restDateString,l.year)}if(isNaN(o)||!o)return new Date(NaN);var m,p=o.getTime(),v=0;if(c.time&&(v=f(c.time),isNaN(v)||null===v))return new Date(NaN);if(!c.timezone){var y=new Date(p+v),h=new Date(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate(),y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds());return h.setFullYear(y.getUTCFullYear()),h}return m=g(c.timezone),isNaN(m)?new Date(NaN):new Date(p+v+m)}function s(e){var t,r={},n=e.split(a.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?(r.date=null,t=n[0]):(r.date=n[0],t=n[1],a.timeZoneDelimiter.test(r.date)&&(r.date=e.split(a.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){var i=a.timezone.exec(t);i?(r.time=t.replace(i[1],""),r.timezone=i[1]):r.time=t}return r}function u(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:null};var a=n[1]&&parseInt(n[1]),i=n[2]&&parseInt(n[2]);return{year:null==i?a:100*i,restDateString:e.slice((n[1]||n[2]).length)}}function d(e,t){if(null===t)return null;var r=e.match(i);if(!r)return null;var n=!!r[4],a=m(r[1]),o=m(r[2])-1,c=m(r[3]),l=m(r[4]),s=m(r[5])-1;if(n)return function(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}(0,l,s)?function(e,t,r){var n=new Date(0);n.setUTCFullYear(e,0,4);var a=7*(t-1)+r+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+a),n}(t,l,s):new Date(NaN);var u=new Date(0);return function(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(v[t]||(y(e)?29:28))}(t,o,c)&&function(e,t){return t>=1&&t<=(y(e)?366:365)}(t,a)?(u.setUTCFullYear(t,o,Math.max(a,c)),u):new Date(NaN)}function m(e){return e?parseInt(e):1}function f(e){var t=e.match(o);if(!t)return null;var r=p(t[1]),a=p(t[2]),i=p(t[3]);return function(e,t,r){return 24===e?0===t&&0===r:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}(r,a,i)?r*n+6e4*a+1e3*i:NaN}function p(e){return e&&parseFloat(e.replace(",","."))||0}function g(e){if("Z"===e)return 0;var t=e.match(c);if(!t)return 0;var r="+"===t[1]?-1:1,a=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?r*(a*n+6e4*i):NaN}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function y(e){return e%400==0||e%4==0&&e%100}var h=(e,t)=>!!e.test(t.value);let b=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let n=63&r[e];t+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return t};var _=(e,t)=>{var r=[],n=b(),a=e,i=t;return{getProjectName:()=>a,updateName:e=>{a=e},getDescription:()=>i,updateDescription:e=>{i=e},id:n,getTasks:()=>r,addTasks:e=>r.push(e),removeTask:e=>r.splice(e,1)}},S=(e,t,r,n,a)=>{var i=a;return{getTitle:()=>e,getDescription:()=>t,getDueDate:()=>r,getPriority:()=>n,updateIsDone:()=>{i=!i},getIsDone:()=>i,id:b()}};function D(r,n){e(2,arguments);var a=t(r),i=t(n);return a.getTime()-i.getTime()}var j=6e4;function E(e){return e.getTime()%j}function k(e){var t=new Date(e.getTime()),r=Math.ceil(t.getTimezoneOffset());t.setSeconds(0,0);var n=r>0?(j+E(t))%j:E(t);return r*j+n}function L(r){e(1,arguments);var n=t(r);return n.setHours(0,0,0,0),n}var T=864e5;function I(t,r){e(2,arguments);var n=L(t),a=L(r),i=n.getTime()-k(n),o=a.getTime()-k(a);return Math.round((i-o)/T)}function N(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}var w=36e5,A=function(e){for(var t=document.createElement("".concat(e)),r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return[...n].forEach((e=>{t.classList.add(e)})),t},C=e=>{var t=[];return e.getTasks().forEach((e=>{t.push({title:e.getTitle(),description:e.getDescription(),dueDate:e.getDueDate(),priority:e.getPriority(),isDone:e.getIsDone()})})),t},q=e=>{var t=[];return e.forEach((e=>{t.push({name:e.getProjectName(),description:e.getDescription(),tasks:C(e)})})),t};function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=(e,t)=>{document.querySelectorAll(".projects-list__checkbox").forEach((r=>{r.addEventListener("click",(()=>{var n,a;r.classList.toggle("projects-list__checkbox--checked"),r.previousSibling.classList.toggle("prioritychecked"),r.nextElementSibling.classList.toggle("projects-list__name--checked"),r.nextElementSibling.nextElementSibling.classList.toggle("projects-list__time--checked"),r.parentElement.classList.toggle("projects-list__item--checked"),(n=t.getTasks().filter((e=>e.id===r.parentElement.dataset.id)),a=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}}(n,a)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].updateIsDone(),localStorage.setItem("db",JSON.stringify(q(e)))}))}))},O=e=>{var t=document.getElementById("menu"),r=document.createDocumentFragment();e.forEach((e=>{r.appendChild((e=>{var t=A("li","menu__item");t.setAttribute("data-id","".concat(e.id));var r=A("span","menu__title");r.textContent="".concat(e.getProjectName());var n=A("i","fas","fa-trash");return t.append(r,n),t})(e))})),t.append(r),(e=>{document.querySelectorAll(".menu i").forEach((t=>{t.addEventListener("click",(r=>{if(null===document.getElementById("edit-project-form")){var n=r.target.parentElement.dataset.id,a=e.findIndex((e=>e.id===n));t.parentElement.remove(),e.splice(a,1),localStorage.setItem("db",JSON.stringify(q(e)))}}))}))})(e),[...document.querySelectorAll(".menu__item")][0].click()},U=(r,n)=>{var a=document.getElementById("projects-list"),i=document.createDocumentFragment();n.getTasks().forEach((r=>{i.appendChild((r=>{var n=A("li","projects-list__item");n.setAttribute("data-id",r.id);var a=A("div","projects-list__priority","".concat(r.getPriority())),i=A("span","projects-list__name");i.textContent="".concat(r.getTitle());var o,c,s,u,d,m=A("span","projects-list__time");m.textContent=(o=l(r.getDueDate()),c=new Date,s=function(t,r){e(2,arguments);var n=D(t,r)/6e4;return n>0?Math.floor(n):Math.ceil(n)}(o,c),u=function(r,n){e(2,arguments);var a=t(r),i=t(n),o=N(a,i),c=Math.abs(I(a,i));a.setDate(a.getDate()-o*c);var l=o*(c-(N(a,i)===-o));return 0===l?0:l}(o,c),d=function(t,r){e(2,arguments);var n=D(t,r)/w;return n>0?Math.floor(n):Math.ceil(n)}(o,c),u<=0?"".concat(d," hours and ").concat(s-60*d," minutes left"):1===u?"".concat(u," day and ").concat(d-24," hours left"):"".concat(u," days and ").concat(d-24*u," hours left"));var f=A("i","fas","fa-trash"),p=A("div","projects-list__checkbox");return!0===r.getIsDone()&&(n.classList.add("projects-list__item--checked"),p.classList.add("projects-list__checkbox--checked"),i.classList.add("projects-list__name--checked"),m.classList.add("projects-list__time--checked"),a.classList.add("prioritychecked")),n.append(a,p,i,m,f),n})(r))})),a.appendChild(i),((e,t)=>{document.querySelectorAll(".projects-list i").forEach((r=>{r.addEventListener("click",(n=>{var a=n.target.parentElement.dataset.id,i=t.getTasks().findIndex((e=>e.id===a));r.parentElement.remove(),t.removeTask(i),localStorage.setItem("db",JSON.stringify(q(e)))}))}))})(r,n),M(r,n)},B=()=>{document.getElementById("menu").innerHTML=""},$=()=>{document.getElementById("projects-list").innerHTML=""};function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y=/^[a-zA-Z0-9À-ÿ\s]{1,20}$/,z=/^[a-zA-Z0-9À-ÿ\s]{1,60}$/;function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H,W,R=e=>{var t=A("div","project-info"),r=A("h1","main__title");r.textContent=e.getProjectName();var n=A("h2","main__subtitle");return n.textContent=e.getDescription(),t.append(r,n),t},V=[],G=JSON.parse(localStorage.getItem("db"));null===G||0===G.length?(V.push(_("Your first project","Add projects and todos!")),V[0].addTasks(S("Your first todo","Add todos and choose its due date and its priority!","2022-01-01","priority3"))):G.forEach(((e,t)=>{V.push(_(e.name,e.description)),e.tasks.forEach((e=>{V[t].addTasks(S(e.title,e.description,e.dueDate,e.priority,e.isDone))}))})),document.getElementById("addproject-button").addEventListener("click",(()=>{document.getElementById("project-form").classList.toggle("hidden")})),document.getElementById("addtask-button").addEventListener("click",(()=>{document.getElementById("todos-form").classList.toggle("hidden")})),H=V,(W=document.getElementById("menu")).addEventListener("click",(e=>{if(null===document.getElementById("edit-project-form")){var t,r,n,a=[...W.childNodes];if(e.target.classList.contains("menu__item")){a.forEach((e=>{e.classList.replace("menu__item--active","menu__item")})),e.target.classList.replace("menu__item","menu__item--active");var i=(o=H.filter((t=>t.id===e.target.dataset.id)),c=1,function(e){if(Array.isArray(e))return e}(o)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}}(o,c)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(o,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];$(),U(H,i),t=i,r=document.querySelector(".main__title"),n=document.querySelector(".main__subtitle"),r.textContent=t.getProjectName(),n.textContent=t.getDescription()}}var o,c})),(e=>{var t=document.getElementById("project-form"),r=document.querySelector(".project-form__name"),n=document.querySelector(".project-form__description"),a=document.querySelector(".button__project-form.button--cancel");t.addEventListener("submit",(a=>{a.preventDefault(),!0===h(Y,r)&&!0===h(z,n)?(((e,t,r)=>{e.push(_(t,r));var n,a,i=document.querySelector(".menu__item--active");if(B(),O(e),null!==i){var o=(n=[...document.querySelectorAll(".menu__item")].filter((e=>e.dataset.id===i.dataset.id)),a=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}}(n,a)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];void 0!==o&&o.click()}localStorage.setItem("db",JSON.stringify(q(e)))})(e,r.value,n.value),t.reset(),t.classList.toggle("hidden"),t.lastChild.classList.contains("error-msg")&&t.lastChild.classList.add("hidden")):t.lastChild.classList.remove("hidden")})),a.addEventListener("click",(e=>{e.preventDefault(),t.classList.add("hidden"),t.reset(),t.lastChild.classList.contains("error-msg")&&t.lastChild.classList.add("hidden")}))})(V),(r=>{var n=document.getElementById("todos-form"),a=document.querySelector(".form__task-name"),i=document.querySelector(".form__task-description"),o=document.querySelector(".form__calendar"),c=document.querySelector("div.group__todo-buttons .button--cancel");n.addEventListener("submit",(c=>{c.preventDefault(),!0===h(Y,a)&&!0===h(z,i)&&[...document.querySelectorAll(".form__radio")].filter((e=>!!e.checked)).length>0==1&&!0===(r=>""!==r.value&&!0!==function(r){return e(1,arguments),t(r).getTime()<Date.now()}(l(r.value)))(o)?(((e,t,r,n)=>{var a=[...document.getElementsByName("priority")].filter((e=>!0===e.checked)),i=document.querySelector(".menu__item--active").dataset.id,o=e.findIndex((e=>e.id===i));e[o].addTasks(S(t.value,r.value,n.value,a[0].defaultValue)),$(),U(e,e[o]),localStorage.setItem("db",JSON.stringify(q(e)))})(r,a,i,o),n.reset(),n.lastChild.classList.contains("error-msg")&&n.lastChild.classList.add("hidden")):n.lastChild.classList.remove("hidden")})),c.addEventListener("click",(e=>{e.preventDefault(),n.classList.add("hidden"),n.reset(),n.lastChild.classList.contains("error-msg")&&n.lastChild.classList.add("hidden")}))})(V),O(V),(e=>{var t=document.querySelector(".button.button--edit");t.addEventListener("click",(()=>{var r=document.querySelector(".main__title"),n=document.querySelector(".main__subtitle");t.classList.add("hidden"),n.remove(),r.replaceWith(((e,t,r)=>{var n=A("form","edit-project");n.setAttribute("id","edit-project-form");var a=A("input","project-form__name");a.setAttribute("value",e.textContent),a.setAttribute("name","name");var i=A("input","project-form__description");i.setAttribute("value",t.textContent),i.setAttribute("name","description");var o=A("div","group__project-buttons"),c=A("button","button","button--save","button__project-form");c.textContent="Save",((e,t,r)=>{var n=document.querySelector(".menu__item--active").dataset.id,a=document.querySelector(".project-info"),i=document.querySelector(".button.button--edit");t.addEventListener("click",(t=>{t.preventDefault();var o=Z(r.filter((e=>e.id===n)),1)[0];o.updateName(e.name.value),o.updateDescription(e.description.value),a.replaceWith(R(o)),localStorage.setItem("db",JSON.stringify(q(r))),i.classList.remove("hidden");var c=document.querySelector(".menu__item--active");if(B(),O(r),null!==c){var l=Z([...document.querySelectorAll(".menu__item")].filter((e=>e.dataset.id===c.dataset.id)),1)[0];void 0!==l&&l.click()}}))})(n,c,r);var l=A("button","button","button--cancel","button__project-form");return((e,t,r)=>{var n=document.querySelector(".menu__item--active").dataset.id,a=document.querySelector(".project-info"),i=document.querySelector(".button.button--edit");t.addEventListener("click",(e=>{e.preventDefault();var t=Z(r.filter((e=>e.id===n)),1)[0];a.replaceWith(R(t)),i.classList.remove("hidden")}))})(0,l,r),l.textContent="Cancel",o.append(c,l),n.append(a,i,o),n})(r,n,e))}))})(V)}();
//# sourceMappingURL=app.799338ed3c58d3b98f30.js.map